#!/bin/bash

TEST=$1
LOG=$2
# PREDIFF: Script to execute before diff'ing output (arguments: <test
#    executable>, <log>, <compiler executable>)

# include only the 'define' line
# looking for define internal i64 @munge-with-ids.foo() 
#
grep define $LOG | sed -E 's/#[[:digit:]]+/#n/' | \
                   sed -E 's/ !dbg ![[:digit:]]+//' > $LOG.tmp
mv $LOG.tmp $LOG
