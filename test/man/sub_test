#!/usr/bin/env bash

CWD=$(cd $(dirname $0) ; pwd)

echo "[Starting subtest - $(date)]"

if [ $# -lt 1 ]; then
    echo '[Error running sub_test: missing compiler argument]'
    exit -1
fi

start=$(date +%s)

echo '[test: "man"]'

$CWD/checkManPages $1
if [ $? != 0 ]; then
    echo '[Error matching man page(s) with compiler environment]'
else
    echo '[Success matching man page(s) with compiler environment]'
fi

elapsed=$(( $(date +%s) - start ))
echo "[Elapsed time to compile and execute all versions of \"man\" - $elapsed seconds]"

echo "[Finished subtest "man"]"
