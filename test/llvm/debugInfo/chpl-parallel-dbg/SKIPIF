#!/usr/bin/env bash

# chpl-parallel-dbg only works well with gasnet+udp/smp for now
if [[ "$CHPL_COMM" != "gasnet" ]]; then
  echo "True"
  exit 0
fi
if [[ "$CHPL_COMM_SUBSTRATE" != "udp" && "$CHPL_COMM_SUBSTRATE" != "smp" ]]; then
  echo "True"
  exit 0
fi
if [[ "$CHPL_TARGET_PLATFORM" != "linux64" ]]; then
  echo "True"
  exit 0
fi

if command -v lldb >/dev/null ; then

  # skip if lldb does not have python support
  # required for pretty printing which affects the output of the tests
  python_path=$(lldb --python-path 2>/dev/null)
  if [[ -z "$python_path" || ! -x "$python_path" ]]; then
    echo "True"
  else
    echo "False"
  fi
else
  echo "True"
fi
