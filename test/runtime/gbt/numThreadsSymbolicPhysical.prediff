#! /bin/bash -norc
numPUs=$( grep -c '^processor[[:space:]]\+: ' /proc/cpuinfo )
numCores1=$( grep -m 1 '^cpu cores[[:space:]]\+: ' /proc/cpuinfo |
             sed 's/^[^0-9]*\([0-9]\+\).*$/\1/' )
numSibs1=$( grep -m 1 '^siblings[[:space:]]\+: ' /proc/cpuinfo |
            sed 's/^[^0-9]*\([0-9]\+\).*$/\1/' )
numCores=$(( $numPUs / ( $numSibs1 / $numCores1 ) ))

echo $numCores > $1.good
