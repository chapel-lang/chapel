#!/usr/bin/env python3

# Looks for --execenv=foo,bar arguments and prints the contents of
# of <prefix>.foo.execenv and <prefix>.bar.execenv where <prefix>
# is the first argument.

import sys
import os

prefix = sys.argv[1]

default = prefix + ".default.execenv"
if os.path.exists(default):
    with open(default, 'r') as fd:
        print(fd.read())

for arg in sys.argv[2:]:
    if arg.startswith("--execenv="):
        values = arg.split('=')[1]
        for value in values.split(','):
            name = prefix + "." + value + ".execenv"
            if os.path.exists(name):
                with open(name, 'r') as fd:
                    print(fd.read())
            else:
                print(name, "not found", file=sys.stderr)
                sys.exit(1)
