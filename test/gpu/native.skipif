#!/usr/bin/env python3

from distutils.spawn import find_executable
import os

# Native GPU tests require nvcc, llvm, and the gpu locale model
missing_nvcc = find_executable("nvcc") is None
no_llvm = os.getenv('CHPL_LLVM') == 'none'
gpu_loc = os.getenv('CHPL_LOCALE_MODEL') == 'gpu'

# We don't have a great way to autodetect if we're going to launch onto a
# compute node with GPUs, so we currently use `CHPL_TEST_GPU` as a proxy
will_run_on_gpu = os.getenv('CHPL_TEST_GPU') == 'true'

print(missing_nvcc or no_llvm or not gpu_loc or not will_run_on_gpu)
