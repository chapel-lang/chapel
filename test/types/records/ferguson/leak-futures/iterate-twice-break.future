bug: non-inlined iterator leaks memory if caller breaks out of loop
