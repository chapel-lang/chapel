Valgrind
========

How-to 
------

To run valgrind on an executable generated by the chpl compiler:

.. code-block:: bash

     export CHPL_RT_NUM_THREADS_PER_LOCALE=100
     export CHPL_TASKS=fifo
     export CHPL_MEM=cstdlib
     export CHPL_RE2_VALGRIND_SUPPORT=true

     cd $CHPL_HOME
     make
     chpl <program.chpl>
     valgrind ./<program>

This may require clobbering and rebuilding the re2 library:

.. code-block:: bash

     cd $CHPL_HOME/third-party/re2
     make clobber && make

Explanation
-----------

Some third party libraries in the Chapel runtime will garble the output of
valgrind. These environment variables sidestep those libraries so that the
the generated code can be cleanly analyzed.
