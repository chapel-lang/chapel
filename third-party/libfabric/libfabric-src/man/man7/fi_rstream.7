.\" Automatically generated by Pandoc 1.19.2.4
.\"
.TH "fi_rstream" "7" "2020\-04\-14" "Libfabric Programmer\[aq]s Manual" "Libfabric v1.10.1"
.hy
.SH NAME
.PP
fi_rstream
.SH OVERVIEW
.PP
The rstream provider supports stream messaging over message based RMA.
It maps stream to message over a core RMA\-based OFI provider.
Only Endpoints and EQs are needed for connection start\-up and
messaging.
Unlike other OFI providers, rstream does not support CQs or memory
registration of any kind.
In order to asynchronously wait for a completion (cm/msg), one can use
fi_control on the endpoint/eq to get an fd to use in a poll call.
For messaging completions, use FI_PEEK on send/recv after poll to see
what type of transaction has transpired.
.SH SUPPORTED FEATURES
.PP
The rstream provider currently supports \f[I]FI_MSG\f[] capabilities.
.TP
.B \f[I]Endpoint types\f[]
The provider supports only endpoint type \f[I]FI_EP_SOCK_STREAM\f[].
.RS
.RE
.PP
\f[I]Endpoint capabilities\f[] : The following data transfer interface
is supported: \f[I]fi_msg\f[].
.TP
.B \f[I]Modes\f[]
The provider does not require the use of any mode bits but supports core
providers that require FI_CONTEXT and FI_RX_CQ_DATA.
.RS
.RE
.TP
.B \f[I]Progress\f[]
The rstream provider only supports \f[I]FI_PROGRESS_MANUAL\f[].
.RS
.RE
.TP
.B \f[I]Threading Model\f[]
The provider supports FI_THREAD_SAFE
.RS
.RE
.TP
.B \f[I]Verbs\-iWarp\f[]
The provider has added features to enable iWarp.
To use this feature, the ep protocol iWarp must be requested in an
fi_getinfo call.
.RS
.RE
.SH LIMITATIONS
.PP
The rstream provider is experimental and lacks performance validation
and extensive testing.
The iWarp protocol may need extra initialization work to re\-enable.
Currently the rstream provider is used to by the rsockets\-OFI library
as a ULP and hooks into the core provider verbs.
It is not interoperable with the previous rsockets(v1) protocol.
There are default settings that limit the message stream (provider
memory region size and CQ size).
These can be modified by fi_setopt.
.SH SETTINGS
.PP
The \f[I]rstream\f[] provider settings can be modified via fi_setopt on
the endpoint (FI_OPT_ENDPOINT) along with the following parameters:
.TP
.B \f[I]FI_OPT_SEND_BUF_SIZE\f[]
Size of the send buffer.
Default is 32KB.
.RS
.RE
.TP
.B \f[I]FI_OPT_RECV_BUF_SIZE\f[]
Size of the recv buffer.
Default is 32KB.
.RS
.RE
.TP
.B \f[I]FI_OPT_TX_SIZE\f[]
Size of the send queue.
Default is 384.
.RS
.RE
.TP
.B \f[I]FI_OPT_RX_SIZE\f[]
Size of the recv queue.
Default is 384.
.RS
.RE
.SH OFI EXTENSIONS
.PP
The rstream provider has extended the current OFI API set in order to
enable a user implementation of Poll.
Specifically sendmsg(FI_PEEK) is supported which replicates the behavior
of the recvmsg(FI_PEEK) feature.
.SH SEE ALSO
.PP
\f[C]fabric\f[](7), \f[C]fi_provider\f[](7), \f[C]fi_getinfo\f[](3)
.SH AUTHORS
OpenFabrics.
